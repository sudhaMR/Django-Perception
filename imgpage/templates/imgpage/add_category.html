<!DOCTYPE html>
{% load static %}
<html>

    <head>
    <style>
    html, body {
    max-width: 100%;
    overflow-x: hidden;
    }

    h1{
    color:white;
    font-family: "Impact", Courier, monospace;
    text-align: center;
    }
    h3{
    color:black;
    font-family: "Serif", Georgia, monospace;
    text-align: center;
    font-size: 20;
    }

    #mainimage{
        width: 80%;
        height: 80%;
        display: block;
        margin: auto;
        position: relative;
    }

    #mainimage img{
            width: 100%;
            margin: auto;
            border-style: outset;
            border-color: Black;

    }

    #inst {
    line-height:30px;
    background-color:#eeeeee;
    height:200px;
    width:280px;
    float:left;
    padding:25px;
    padding-top:50px;
    margin-top:120px;
    }

    section{
        width: 45%;
        height: 45%;
        margin-left: auto;
        margin-right: auto;
        border: 3px;
        border-style: outset;
        border-color: LimeGreen;
        padding: 2% ;
    }

    form{
        text-align: center;
    }

    header{
        background-color: ;
        float:top;
    }

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, caption {
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    font-size: 100%;
    vertical-align: baseline;
    background: transparent;
}

    </style>

    <script type="text/javascript">
        DJANGO_STATIC_URL = "{% static ""%}";
        images = {{imageArray|safe}};
    </script>

 <script  type="text/javascript">

      		function slideshow()
      		{
      		    var imaAges = {{imageArray|safe}};
      			var index = Math.floor((Math.random() * (images.length-1) + 1));
      			console.log("index"+index);
      			var i = document.getElementById("mainimage");
      			document.getElementsByTagName("img")[0].src =  DJANGO_STATIC_URL+"images/"+images[index];
      		}

		 </script>
         <script  type="text/javascript">

      		function slideshow()
      		{
      		    var imaAges = {{imageArray|safe}};
      			var index = Math.floor((Math.random() * (images.length-1) + 1));
      			console.log("index"+index);
      			var i = document.getElementById("mainimage");
      			document.getElementsByTagName("img")[0].src =  DJANGO_STATIC_URL+"images/"+images[index];
      		}

		 </script>
		 <script type="text/javascript">
            function loadNextButton()
            {
              var i = document.getElementById("slide");
              var i2 = i.getElementsByTagName("img")[0];
              i2.src = DJANGO_STATIC_URL+"images/"+"Buttons/next.png";
            }

            loadNextButton();
            </script>
    <style type="text/css">

    .timeClass {
     font-family:arial,verdana,helvetica,sans-serif;
     font-weight:normal;
     font-size:16pt;
     font-style: bold;
     }

     .submitbox{
      width: 40px;
      height: 40px;
      font-style: 16pt;
     }

     .inputbox{
      width: 600px;
       height: 30px;
     }

      #slide {
       position: absolute;
       float:right;
       padding:5px;
       left: 110%;
       width:70px;
       top:50%;
       text-align: right;
       }

  #titlebox{
    float:top;
    margin:0;
    width:100%;
    text-align:center;
    background-color: #66CC66;
    padding:12px;
    font-size: 50px;
    color:white;
    font-family: "Impact", Courier, monospace;
    text-align: center;
  }

  #linkbox{
    color:black;
    font-family: "Courier New", Courier, monospace;
    text-align: center;
    font-size: 20;
  }


</style>

        <title>Image Page</title>
        <link rel="stylesheet" href="{% static "css/base.css" %}" />
        <script src="{% static "js/jquery.js" %}"></script>

    </head>

    <body>




        <div id="timebox">
            <table width="40%">
                 <tr><td width="40%" align="center"><span id="theTime" class="timeClass"></span></td></tr>
            </table>
        </div>

        <div id="txt"></div>

        <div id="titlebox">
            <header> Perception</header>
        </div>
        <br>
        <h3>What does the picture remind you of?</h3>

       <section >
            <div id="mainimage" class="photo" >
            <img src="" alt="Picture "/>
            <script>
                var images = {{imageArray|safe}};
                var index = Math.floor((Math.random() * (images.length-1) + 1));
                var i = document.getElementById("mainimage");
      			document.getElementsByTagName("img")[0].src =  DJANGO_STATIC_URL+"images/"+images[index];
      			loadNextButton();
            </script>

                <div id = "slide">
                    <a href="javascript:slideshow()"><img src="" id="slide" width=80  height=60 /></a>
                </div>
            </div>


        </section>

       <!-- <script  type="text/javascript">

      		function slideshow()
      		{
      		    var imaAges = {{imageArray|safe}};
      			var index = Math.floor((Math.random() * (images.length-1) + 1));
      			console.log("index"+index);
      			var i = document.getElementById("mainimage");
      			document.getElementsByTagName("img")[0].src =  DJANGO_STATIC_URL+"images/"+images[index];
      		}

		 </script>-->
		 <script type="text/javascript">
            function loadNextButton()
            {
              var i = document.getElementById("slide");
              var i2 = i.getElementsByTagName("img")[0];
              i2.src = DJANGO_STATIC_URL+"images/"+"Buttons/next.png";
            }

            loadNextButton();
            </script>


            <script type="text/javascript">
            (
            function()
            {
            var img1 = document.getElementById('mainimage');
            var img = img1.getElementsByTagName("img")[0];

            img.onload = function()
                {
                if(img.height > img.width)
                    {
                    img.style.height = '100%' ;
                    img.style.width = 'auto';
                    }
                else if(img.height == img.width)
                    {
                     img.style.height = '100%';
                     img.style.width = '100%';
                    }

                else
                    {
                        img.style.height = 'auto';
                        img.style.width = '100%';
                    }

                    //img.style.text-align='center';
                };

            }());
            </script>

            <style type="text/css">
            div.photo { height: 100px; line-height: 100px;text-align:center; }
            div.photo img { vertical-align:middle; }
            </style>


        <script type="text/javascript">
            	function required(iptext)
            	{
            	if (iptext.tags.value.length == 0)
                  {
                  alert("This field cannot empty");
                  iptext.tags.focus();
                  return false;
                  }
                 return true;
            	}
        </script>

        <form id="category_form" method="post" action="/imgpage/add_category/" onsubmit="return required(this)">

            {% csrf_token %}

            {% for field in form.visible_fields %}
                {{ field.errors }}
                {{ field.help_text }}
                {{ field }}
            {% endfor %}

            <script type="text/javascript">
            	function updateid()
            	{
            		document.getElementById("id").value = "1";
            	}
            </script>

            <script type="text/javascript">
            	function updatepath()
            	{
            	document.getElementById("filepath").value = document.getElementsByTagName("img")[0].src ;
                console.log("File path:"+document.getElementById("filepath").value);
            	}
            </script>
            <br>
            <h3>Enter one or more strings here (Separated by commas)</h3>
            <input type="text" class="inputbox" name="tags" onfocus ="updateid()"/>
            <input type="hidden" id="id" name="id" />
            <input type="hidden" id="filepath" name="filepath" value="updatepath()" />
            <input type="submit" name="submit" class="submitbox" value="Go!" onclick="updatepath()" />

        </form>

        <div style="text-align: center" id ="linkbox">
            <a href="/imgpage/taginfo/" name="taginfo">See what others said</a>
        </div>
    </body>

</html>